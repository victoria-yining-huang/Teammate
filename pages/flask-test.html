<html>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <body>
    <h1>
      This is a flask test.
    </h1>
    <button onclick="start()">
      Start Job
    </button>
    <button onclick="check()">
      Check Job
    </button>
  </body>
  <script>
    function start() {
      $.ajax({
        url: "/start-model",
        type: "post",
        success: function(resp) {
          console.log(resp);
          const key = resp["Key"];
          sessionStorage.setItem("model_key", key);
        }
      });
    }
    function check() {
      const key = sessionStorage.getItem("model_key");
      console.log("key ", key);
      $.ajax({
        url: "/status",
        type: "post",
        dataType: "json",
        contentType: "application/json",
        data: JSON.stringify({
          key: key
        }),
        success: function(resp) {
          console.log(resp);
        }
      });
    }
  </script>
</html>
